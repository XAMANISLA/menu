<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reportes | Devtrendmx</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Outfit', sans-serif;
            background-color: #f8f9f4;
        }

        .report-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 2rem;
            padding: 2rem;
        }

        .glass-navbar {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(88, 129, 87, 0.1);
        }

        .badge-popularity {
            font-size: 10px;
            font-weight: 900;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen">
    <nav class="glass-navbar sticky top-0 z-50 px-6 py-4 flex items-center justify-between shadow-sm">
        <div class="flex items-center gap-4">
            <div class="bg-[#3a5a40] p-2.5 rounded-xl text-white shadow-lg">
                <i class="fas fa-chart-line text-xl"></i>
            </div>
            <div>
                <h1 class="text-xl font-black text-[#3a5a40] tracking-tight uppercase">Módulo de Reportes</h1>
                <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Análisis de Ventas y Tiempos
                </p>
            </div>
        </div>
        <div class="flex items-center gap-4">
            <a href="admin_menu.html"
                class="text-gray-400 hover:text-gray-600 font-black uppercase text-[10px] tracking-widest">Panel
                Admin</a>
            <button onclick="window.location.reload()"
                class="bg-[#588157] text-white p-3 rounded-full hover:scale-105 transition-transform">
                <i class="fas fa-sync-alt"></i>
            </button>
        </div>
    </nav>

    <main class="p-8 max-w-7xl mx-auto space-y-10">
        <!-- Time Filters -->
        <div class="flex flex-wrap items-center justify-between gap-6">
            <div>
                <h2 class="text-3xl font-black text-[#3a5a40] tracking-tighter uppercase">Estadísticas</h2>
                <p class="text-xs text-gray-400 font-bold tracking-widest uppercase mt-1">Datos actualizados al momento
                </p>
            </div>
            <div class="flex gap-4">
                <button onclick="changeRange('today')" id="btn-today"
                    class="px-6 py-3 bg-[#588157] text-white rounded-xl text-[10px] font-black uppercase tracking-widest border border-[#588157] transition-all">Hoy</button>
                <button onclick="changeRange('week')" id="btn-week"
                    class="px-6 py-3 bg-white text-gray-400 rounded-xl text-[10px] font-black uppercase tracking-widest border border-gray-100 hover:border-[#588157]/30 transition-all">Semana</button>
                <button onclick="changeRange('all')" id="btn-all"
                    class="px-6 py-3 bg-white text-gray-400 rounded-xl text-[10px] font-black uppercase tracking-widest border border-gray-100 hover:border-[#588157]/30 transition-all">Historial</button>
            </div>
        </div>

        <div class="report-card mb-10">
            <div class="flex items-center gap-4 mb-8">
                <div
                    class="w-12 h-12 bg-green-50 text-green-600 rounded-2xl flex items-center justify-center border border-green-100">
                    <i class="fas fa-calendar-alt text-xl"></i>
                </div>
                <div>
                    <h3 class="text-xl font-black text-[#3a5a40] uppercase tracking-tighter">Resumen de Ventas Diarias
                    </h3>
                    <p class="text-[10px] text-gray-400 font-bold tracking-widest uppercase">Total recaudado de Lunes a
                        Viernes</p>
                </div>
            </div>

            <div id="daily-sales-container" class="grid grid-cols-1 sm:grid-cols-5 gap-6">
                <!-- Días de la semana -->
            </div>
        </div>

        <div class="grid grid-cols-1 xl:grid-cols-2 gap-10">
            <!-- Preparation Efficiency -->
            <div class="report-card flex flex-col h-[600px]">
                <div class="flex items-center gap-4 mb-8">
                    <div
                        class="w-12 h-12 bg-blue-50 text-blue-500 rounded-2xl flex items-center justify-center border border-blue-100">
                        <i class="fas fa-clock text-xl"></i>
                    </div>
                    <div>
                        <h3 class="text-xl font-black text-[#3a5a40] uppercase tracking-tighter">Eficiencia de Tiempos
                        </h3>
                        <p class="text-[10px] text-gray-400 font-bold tracking-widest uppercase">Promedio de preparación
                            por orden</p>
                    </div>
                </div>

                <div class="flex-1 overflow-y-auto pr-2">
                    <table class="w-full text-left">
                        <thead class="sticky top-0 bg-white">
                            <tr
                                class="text-[9px] font-black text-gray-400 uppercase tracking-widest border-b border-gray-50">
                                <th class="pb-4">Mesa</th>
                                <th class="pb-4">Inicio</th>
                                <th class="pb-4">Término</th>
                                <th class="pb-4 text-right">Duración</th>
                            </tr>
                        </thead>
                        <tbody id="tiempos-table-body" class="text-xs font-bold divide-y divide-gray-50 text-gray-600">
                            <!-- Items -->
                        </tbody>
                    </table>
                </div>

                <div class="mt-8 pt-8 border-t border-gray-50 flex justify-between items-center">
                    <span class="text-[10px] font-black text-gray-400 uppercase tracking-widest">Tiempo Promedio</span>
                    <span id="avg-time" class="text-2xl font-black text-[#3a5a40] tracking-tighter">-- min</span>
                </div>
            </div>

            <!-- Product Popularity -->
            <div class="report-card flex flex-col h-[600px]">
                <div class="flex items-center gap-4 mb-8">
                    <div
                        class="w-12 h-12 bg-amber-50 text-amber-500 rounded-2xl flex items-center justify-center border border-amber-100">
                        <i class="fas fa-fire text-xl"></i>
                    </div>
                    <div>
                        <h3 class="text-xl font-black text-[#3a5a40] uppercase tracking-tighter">Ranking de Productos
                        </h3>
                        <p class="text-[10px] text-gray-400 font-bold tracking-widest uppercase">Niveles de venta por
                            artículo</p>
                    </div>
                </div>

                <div class="flex-1 overflow-y-auto pr-2">
                    <div id="popularity-list" class="space-y-4">
                        <!-- Popularity bars -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="js/supabase.js"></script>
    <script src="js/reportes.js"></script>
</body>

</html>